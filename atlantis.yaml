version: 3
automerge: false
delete_source_branch_on_merge: true
projects:
- name: my-dev-project
  dir: dev/
  workflow: custom
  autoplan:
    enabled: true
    when_modified: ["*.tf", "*.tfvars"]
  apply_requirements: [approved]

workflows:
  custom:
    plan:
      steps:
      - init:
          extra_args: ["-upgrade"]
      - plan:
          extra_args: ["-lock", "false"]
    apply:
      steps:
      - apply:
          extra_args: ["-auto-approve"]
